<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Stark Explorer</title>
    <style>
      /* ---------- layout ---------- */
      :root{
        --bg0:#020024;
        --bg1:#09104f;
        --accent1: #00f0ff;
        --accent2: #004bff;
        --glass: rgba(255,255,255,0.06);
        --glass-strong: rgba(255,255,255,0.09);
      }
      html,body { height:100%; }
      body{
        margin:0;
        font-family: Inter, "Poppins", system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
        background: radial-gradient(circle at 20% 10%, #07103a 0%, var(--bg1) 30%, #000 100%);
        color: #fff;
        overflow:hidden;
      }

      /* starfield canvas full-screen behind UI */
      #starfield {
        position:fixed;
        inset:0;
        z-index:0;
        display:block;
      }

      /* game area */
      .app {
        position:relative;
        width:100%;
        height:100vh;
        z-index:1;
        display:flex;
        align-items:stretch;
        gap:18px;
      }

      /* left: game viewport */
      .viewport {
        flex: 1 1 0;
        position: relative;
        overflow: hidden;
        border-right: 1px solid rgba(255,255,255,0.03);
        display:flex;
        flex-direction:column;
        align-items:center;
        justify-content:flex-start;
      }

      .header {
        width:100%;
        display:flex;
        gap:12px;
        align-items:center;
        justify-content:space-between;
        padding:18px 24px;
        backdrop-filter: blur(6px);
      }

      h1 {
        margin:0;
        font-size:20px;
        letter-spacing:0.6px;
        display:flex;
        gap:8px;
        align-items:center;
      }

      .controls {
        display:flex;
        gap:8px;
        align-items:center;
      }

      .btn {
        background: linear-gradient(90deg,var(--accent1),var(--accent2));
        border:none;
        color:white;
        padding:8px 12px;
        border-radius:10px;
        cursor:pointer;
        box-shadow:0 6px 18px rgba(0,75,255,0.12);
        font-weight:600;
      }
      .btn.ghost {
        background: var(--glass);
        border: 1px solid rgba(255,255,255,0.04);
      }

      /* viewport inner playfield */
      #playfield {
        position:relative;
        width:100%;
        max-width:1000px;
        height:calc(100vh - 120px);
        margin:20px auto;
        background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.2));
        border-radius:14px;
        overflow:hidden;
        box-shadow: 0 10px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.03);
      }

      /* lanes */
      .lane {
        position:absolute;
        top:0;
        bottom:0;
        width:33.3333%;
        pointer-events:none;
      }
      .lane:nth-child(1){ left:0; }
      .lane:nth-child(2){ left:33.3333%; }
      .lane:nth-child(3){ left:66.6666%; }

      .lane::before{
        content:'';
        position:absolute;
        top:0;
        left:50%;
        transform:translateX(-50%);
        width:2px;
        height:100%;
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
      }

      /* UFO */
      #ufo {
        position:absolute;
        bottom:72px;
        width:86px;
        height:46px;
        left: calc(33.3333% * 1 + 50% - 43px); /* middle lane */
        transform-origin:center;
        z-index:6;
        transition:left 160ms cubic-bezier(.2,.8,.25,1);
        pointer-events:none;
      }
      /* UFO visual */
      .ufo-body{
        width:100%;
        height:100%;
        border-radius:50% 50% 36% 36%;
        background: radial-gradient(circle at 30% 30%, #8effff 0%, #00a9ff 30%, #003c8a 100%);
        box-shadow: 0 6px 30px rgba(0,180,255,0.14), 0 0 18px rgba(0,255,240,0.06) inset;
        position:relative;
        overflow:visible;
      }
      .ufo-glow{
        position:absolute;
        left:50%;
        transform:translateX(-50%);
        bottom:-24px;
        width:110%;
        height:34px;
        border-radius:50%;
        filter:blur(14px);
        background: radial-gradient(closest-side, rgba(0,255,240,0.25), rgba(0,100,255,0.05));
        z-index:1;
      }
      .ufo-window{
        position:absolute;
        left:50%;
        transform:translateX(-50%);
        top:6px;
        width:36px;
        height:18px;
        border-radius:50%;
        background: linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.05));
        box-shadow: 0 2px 8px rgba(0,0,0,0.4) inset;
      }
      @keyframes ufo-bob { 0%{ transform: translateY(0)} 100% {transform: translateY(-6px)} }
      .ufo-body { animation: ufo-bob 1.8s ease-in-out infinite alternate; }

      /* falling objects */
      .asteroid, .coin {
        position:absolute;
        top:-80px;
        z-index:4;
        will-change: transform;
        pointer-events:none;
      }

      .asteroid {
        border: 1px solid red;
        width:48px;
        height:48px;
        border-radius:50%;
        background: radial-gradient(circle at 25% 25%, #b07a3a, #5b3b20 60%);
        box-shadow: 0 6px 18px rgba(0,0,0,0.5), inset -6px -8px 14px rgba(255,255,255,0.03);
        transform-origin:center;
        animation: fall-asteroid linear forwards;
      }
      .coin {
        border: 1px solid yellow;
        width:30px;
        height:30px;
        border-radius:50%;
        background: radial-gradient(circle at 30% 25%, #fff7c2 0%, #ffd33d 40%, #c99200 100%);
        box-shadow: 0 6px 18px rgba(0,0,0,0.35), 0 0 12px rgba(255,215,0,0.14) inset;
        animation: fall-coin linear forwards, spin 0.9s linear infinite;
      }

      @keyframes fall-asteroid {
        0% { transform: translateY(-20px) rotate(0deg) scale(1); opacity:0.95 }
        100% { transform: translateY(120vh) rotate(720deg) scale(1); opacity:1; }
      }
      @keyframes fall-coin {
        0% { transform: translateY(-20px) scale(0.9); opacity: 0.95;}
        100% { transform: translateY(100vh) scale(1); opacity: 1; }
      }
      @keyframes spin { from { transform: rotateY(0deg) } to { transform: rotateY(360deg) } }

      /* right: sidebar (scoreboard & leaderboard) */
      .sidebar {
        width:320px;
        padding:20px;
        box-sizing:border-box;
        display:flex;
        flex-direction:column;
        gap:14px;
        z-index:2;
        backdrop-filter: blur(8px);
      }

      .panel {
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
        border-radius:12px;
        padding:14px;
        border:1px solid rgba(255,255,255,0.03);
        box-shadow: 0 6px 20px rgba(0,0,0,0.5);
      }

      .score-box {
        display:flex;
        gap:10px;
        align-items:center;
        justify-content:space-between;
      }
      .score-big { font-size:22px; font-weight:700; color:var(--accent1); }
      .small-muted { color:rgba(255,255,255,0.65); font-size:13px; }

      .leaderboard-list {
        display:flex;
        flex-direction:column;
        gap:8px;
        margin-top:8px;
      }
      .leader {
        display:flex;
        align-items:center;
        gap:12px;
        justify-content:space-between;
        padding:8px;
        border-radius:8px;
        background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
        border:1px solid rgba(255,255,255,0.02);
      }
      .leader .name { font-weight:600; font-size:14px; }
      .leader .score { font-weight:700; color: var(--accent2); }

      /* misc */
      .muted { color: rgba(255,255,255,0.6); font-size:13px; }
      .hint { font-size:12px; color:rgba(255,255,255,0.45) }
      .footer-note { font-size:12px; color:rgba(255,255,255,0.38); text-align:center; margin-top:10px; }

      /* responsive */
      @media (max-width:900px){
        .sidebar { display:none; }
        #playfield { max-width:100%; height:calc(100vh - 100px); margin:12px; border-radius:10px; }
      }
    </style>
    <script type="module" crossorigin src="/assets/index-D6MPEpSn.js"></script>
  </head>

  <body>
    <!-- starfield canvas -->
    <canvas id="starfield"></canvas>

    <div class="app">
      <div class="viewport">
        <div class="header">
          <h1>Stark Explorer</h1>

          <div class="controls">
            <button id="controller-button" class="btn">Connect</button>
            <button id="spawn-button" class="btn ghost" disabled>Spawn (on-chain)</button>
          </div>
        </div>

        <div id="playfield" aria-label="game-playfield" style="position:relative; overflow:hidden; width:100%; height:100%;">

  <!-- GAME OVER overlay -->
  <div id="game-over" style="
        position:absolute; 
        top:40%; 
        left:50%; 
        transform:translate(-50%,-50%); 
        font-size:48px; 
        font-weight:bold; 
        color:red; 
        text-shadow:2px 2px 8px black; 
        display:none; 
        z-index:10;">
    GAME OVER
  </div>

  <!-- Lanes -->
  <div class="lane" style="position:absolute; left:25%; width:2px; height:100%; background:rgba(255,255,255,0.1);"></div>
  <div class="lane" style="position:absolute; left:50%; width:2px; height:100%; background:rgba(255,255,255,0.1);"></div>
  <div class="lane" style="position:absolute; left:75%; width:2px; height:100%; background:rgba(255,255,255,0.1);"></div>

  <!-- UFO -->
  <div id="ufo" aria-hidden="true" style="position:absolute; bottom:20px; left:50%; transform:translateX(-50%); z-index:5;">
    <div class="ufo-body">
      <div class="ufo-window"></div>
      <div class="ufo-glow"></div>
    </div>
  </div>

  <!-- UI overlays top-left -->
  <div style="position:absolute; left:18px; top:18px; z-index:10;">
    <div id="position-display" class="muted">Lane (1)</div>
    <div id="score-display" class="muted">Coins: 0</div>
    <div id="high-score-display" class="muted">High Score: 0</div>
  </div>

  <!-- UI hint bottom-right -->
  <div style="position:absolute; right:18px; bottom:18px; z-index:10;">
    <div class="hint">Use ← → to move lanes • Collect coins, avoid asteroids</div>
  </div>

</div>

<!-- Sidebar -->
<aside class="sidebar">
  <div class="panel">
    <div class="score-box">
      <div>
        <div class="small-muted">Current Score</div>
        <div id="score-big" class="score-big">0</div>
      </div>
      <div style="text-align:right;">
        <div class="small-muted">High Score</div>
        <div id="high-big" class="score-big">0</div>
      </div>
    </div>
    <div style="margin-top:12px" class="muted">
      Round lasts while you're exploring. Coins update on-chain.
    </div>
  </div>

  <div class="panel">
    <div class="small-muted">Leaderboard</div>
    <div id="leaderboard" class="leaderboard-list">
      <!-- top players will be inserted here -->
    </div>
    <div style="margin-top:10px" class="footer-note">Your Local Leaderboard.</div>
  </div>
</aside>

    <!-- sound effects -->
    <audio id="coinSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>
    <audio id="crashSound" src="https://actions.google.com/sounds/v1/impacts/crash.ogg" preload="auto"></audio>

    
  </body>
</html>